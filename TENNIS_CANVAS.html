<html>
    <head>
    </head>
        <body>
            <canvas id="Mycanvas" width="600px" height="600px">

                перезагрузите браузвер
             </canvas>
              


               
                        
                           
                </svg>
        </body>
    
<script>
    "use strict"

 function TennisStyle(){

    var widthBlock =500; // ширина поля
    var heightBlock=300; // высота поля
    var colorBlock="#f1eb06" // цвет поля
    var borderBlock="black"//рамка поля
    //мячик
    var BallColor="red";
    var BallRadius=25/2;//радиус 1-е число(30)

    var button = document.createElement("input"); // создаем кнопку
        button.type="button"
        button.value="старт!";
        button.id="Starts";
        button.style.position="absolute";
        button.style.top="15px";
        button.style.left="70px"
        document.body.appendChild(button);//задаем onclick если он клик уже нажат, то не запукскаем функцию

        var text=document.createElement("h1");//создаем счет
        text.innerHTML="0:0"
        text.id="Goal"
        text.style.position="absolute";
        text.style.margin="0px";
        text.style.top="0px";
        text.style.left="242px"
        document.body.appendChild(text);




    var myCanvas = document.getElementById("Mycanvas"); // находим canvas
    var context = myCanvas.getContext("2d");

    //создаем главное поле
        context.beginPath(); 
        context.fillStyle = colorBlock;
        context.fillRect(8, 38, widthBlock, heightBlock);
        context.lineWidth = 5;
        context.stroke();

        context.beginPath(); // рисуем рамку для главного поля
        context.rect(8, 38, widthBlock+1, heightBlock+1);
        context.strokeStyle = 'black';
        context.lineWidth = 1;
        context.stroke();


    //создаем игроков
        context.beginPath(); //левый игрок
        context.fillStyle = "green";
        context.fillRect(9, 130, 10, 100);
        context.lineWidth = 5;
        context.stroke();
                        
        context.beginPath(); //правый игрок
        context.fillStyle = "blue";
        context.fillRect(498, 130, 10, 100);
        context.lineWidth = 5;
        context.stroke();


    //создаем мяч
    context.beginPath();
    context.strokeStyle = BallColor; //основного круга (желтый)
    context.lineWidth = 0;
    context.arc(250, 180, BallRadius, 0, Math.PI*2, false);
    context.closePath();
    context.strokeStyle = BallColor;  
    context.fillStyle = BallColor;
    context.fill();
    context.stroke();

        button.onclick=function(){
        tennisTehnick()
         };

 }





    TennisStyle()





















function tennisTehnick(){

    var Goal=document.getElementById("Goal");
    var button=document.getElementById("Starts");
    var myCanvas = document.getElementById("Mycanvas"); // находим canvas
    var context = myCanvas.getContext("2d");
    var ballH={
        posX : 250,
        posY : 180,
        speedX : 5,
        speedY : 5,
        width : 50,
        height: 50,
        OnePlayer:0,
        TwoPlayer:0,
        OneSpeed:0,
        TwoSpeed:0,
        stopBall:0,
        OnePlayerGol:0,
        TwoPlayerGol:0,
        sumballposx:250,
        sumballposy:180,
        OneBlock:130,
        TwoBlock:130,
        Rigthwall:0,
        
        update : function() {

            

         
        }
    }

    var areaH={
        width : 502,
        height : 302   
    }



    document.body.onkeydown = function(e){ //событие нажатия кнопок
        e = event || window.event;
    
    if (e.key=="Shift"){
        ballH.OneSpeed=-2;//5-скрость
    }
    if(e.key=="Control"){
        ballH.OneSpeed=2;
    }
    if(e.key=="ArrowUp"){
        ballH.TwoSpeed=-2;
    }
    if(e.key=="ArrowDown"){
        ballH.TwoSpeed=2;
    }
};



 document.body.onkeyup = function(e){ //событие отпускания кнопок
        e = event || window.event;
    
    if (e.key=="Shift"){
        ballH.OneSpeed=0;//0-скрость
    }
    if(e.key=="Control"){
        ballH.OneSpeed=0;
    }
    if(e.key=="ArrowUp"){
        ballH.TwoSpeed=0;
    }
    if(e.key=="ArrowDown"){
        ballH.TwoSpeed=0;
    }
};

function ContinueGame(){ 
                ballH.speedX=5;
                ballH.speedY=5;

                if( ballH.Rigthwall==1){
                    ballH.speedX=-5;
                    ballH.speedY=-5;
                    ballH.Rigthwall=0;
                }

                if ( ballH.posX<=5 ) { 
                    ballH.posX=0;
                }

               
}

function start() {
                // плавное движение - от 25 кадр/сек
        
                setInterval(tick,30);

                button.onclick=function(){
                ContinueGame()
                };
    
    }

    start();

    ballH.stopBall=1;
    

 function tick() {

            var playerWidth=10;
            var playerHeight=100;
            var oneTop;
            var twoTop;

            //задаем движение мячика
           
            context.beginPath(); //зарисовываем старый круг
            context.fillStyle = "#f1eb06";
            context.fillRect(ballH.sumballposx-15, ballH.sumballposy-15, 30, 30);
            context.lineWidth = 5;
            context.stroke();
            
            ballH.sumballposx=ballH.sumballposx+ballH.speedX;
            ballH.sumballposy=ballH.sumballposy+ballH.speedY;


            //создаем мяч
            context.beginPath();
            context.strokeStyle = "red"; //основного круга (красный)
            context.lineWidth = 0;
            context.arc(ballH.sumballposx, ballH.sumballposy, 25/2, 0, Math.PI*2, false);
            context.closePath();
            context.strokeStyle = "red";  
            context.fillStyle = "red";
            context.fill();
            context.stroke();
            


            //задаем границы мячика
            if(ballH.sumballposy>=320){ //если мячик ниже стенки
                ballH.sumballposy=ballH.sumballposy
                ballH.speedY=-5;
            }
             //если мячик выше стенки
             if(ballH.sumballposy<=55){ //если мячик ниже стенки
                ballH.sumballposy=ballH.sumballposy
                ballH.speedY=+5;
            }

            if(ballH.sumballposy>ballH.OneBlock&&ballH.sumballposy<ballH.OneBlock+100){
            
             // если мячик левее стенки
             if(ballH.sumballposx<=35){
                ballH.speedX=-ballH.speedX;
             }
            }
            else{
                if(ballH.sumballposx<=35){
                    if(ballH.speedX!=0&&ballH.speedY!=0){
                    ballH.TwoPlayerGol=ballH.TwoPlayerGol+1;
                    Goal.innerHTML=ballH.OnePlayerGol+":"+ballH.TwoPlayerGol;
                    }

                ballH.speedX=0;
                ballH.speedY=0;
                }

            }

            if(ballH.sumballposy>ballH.TwoBlock&&ballH.sumballposy<ballH.TwoBlock+100){
                // если мячик правее стенки
                if(ballH.sumballposx>=480){ 
                ballH.speedX=-ballH.speedX;
               
                }
            }
            else{
                if(ballH.sumballposx>=480){  
                 ballH.Rigthwall=1;
                    if(ballH.speedX!=0&&ballH.speedY!=0){//если мячик вне ракетки
                        ballH.OnePlayerGol=ballH.OnePlayerGol+1;
                        Goal.innerHTML=ballH.OnePlayerGol+":"+ballH.TwoPlayerGol;
                    }
                    
                 ballH.speedX=0;
                 ballH.speedY=0;
                }
            }


                
           

                //задаем движение ракеток

                //если ракетка выше
                if(ballH.TwoBlock<=40){
                    ballH.TwoSpeed=0;
                    ballH.TwoBlock=ballH.TwoBlock+2;
                        context.beginPath(); //закрашиваем правого игрока
                        context.fillStyle = "#f1eb06";
                        context.fillRect(498, ballH.TwoBlock-2, 10, 100);
                        context.lineWidth = 5;
                        context.stroke();

                        ballH.TwoBlock=ballH.TwoBlock+ballH.TwoSpeed;


                        context.beginPath(); //рисуем правого игрока
                        context.fillStyle = "blue";
                        context.fillRect(498, ballH.TwoBlock+2, 10, 100);
                        context.lineWidth = 5;
                        context.stroke();
                        ballH.TwoBlock=ballH.TwoBlock+2;

                }


               else if(ballH.OneBlock<=40){
                    ballH.OneSpeed=0;
                    ballH.OneBlock=ballH.OneBlock+2;
                        context.beginPath(); //закрашиваем левого игрока
                        context.fillStyle = "#f1eb06";
                        context.fillRect(9, ballH.OneBlock-2, 10, 100);
                        context.lineWidth = 5;
                        context.stroke();

                       

                        ballH.OneBlock= ballH.OneBlock+ballH.OneSpeed;
                        

                        context.beginPath(); //рисуем нового левого игрока
                        context.fillStyle = "green";
                        context.fillRect(9, ballH.OneBlock+2, 10, 100);
                        context.lineWidth = 5;
                        context.stroke();
                    
                }

                    ///если ракетка ниже
              else  if(ballH.TwoBlock>=238){
                    ballH.TwoSpeed=0;
                    ballH.TwoBlock=ballH.TwoBlock-2;
                        context.beginPath(); //закрашиваем правого игрока
                        context.fillStyle = "#f1eb06";
                        context.fillRect(498, ballH.TwoBlock+2, 10, 100);
                        context.lineWidth = 5;
                        context.stroke();

                        ballH.TwoBlock=ballH.TwoBlock+ballH.TwoSpeed;


                        context.beginPath(); //рисуем правого игрока
                        context.fillStyle = "blue";
                        context.fillRect(498, ballH.TwoBlock-2, 10, 100);
                        context.lineWidth = 5;
                        context.stroke();
                        ballH.TwoBlock=ballH.TwoBlock-2;

                }


               else if(ballH.OneBlock>=238){
                    ballH.OneSpeed=0;
                    ballH.OneBlock=ballH.OneBlock-2;
                        context.beginPath(); //закрашиваем левого игрока
                        context.fillStyle = "#f1eb06";
                        context.fillRect(9, ballH.OneBlock+2, 10, 100);
                        context.lineWidth = 5;
                        context.stroke();

                       

                        ballH.OneBlock= ballH.OneBlock+ballH.OneSpeed;
                        

                        context.beginPath(); //рисуем нового левого игрока
                        context.fillStyle = "green";
                        context.fillRect(9, ballH.OneBlock-2, 10, 100);
                        context.lineWidth = 5;
                        context.stroke();
                    
                }
                
                else{
                context.beginPath(); //закрашиваем левого игрока
                context.fillStyle = "#f1eb06";
                context.fillRect(9, ballH.OneBlock, 10, 100);
                context.lineWidth = 5;
                context.stroke();

                context.beginPath(); //закрашиваем правого игрока
                context.fillStyle = "#f1eb06";
                context.fillRect(498, ballH.TwoBlock, 10, 100);
                context.lineWidth = 5;
                context.stroke();

                ballH.OneBlock= ballH.OneBlock+ballH.OneSpeed;
                ballH.TwoBlock=ballH.TwoBlock+ballH.TwoSpeed;

                context.beginPath(); //рисуем нового левого игрока
                context.fillStyle = "green";
                context.fillRect(9, ballH.OneBlock, 10, 100);
                context.lineWidth = 5;
                context.stroke();

                context.beginPath(); //рисуем правого игрока
                context.fillStyle = "blue";
                context.fillRect(498, ballH.TwoBlock, 10, 100);
                context.lineWidth = 5;
                context.stroke();
                }






           
          /* var oneBlock = document.getElementById("OnePlayer");
           var twoBlock = document.getElementById("TwoPlayer");
           oneTop=Number(oneBlock.style.y.replace(/[^-0-9]/gim,''));// положение блоков в y , тк они с окончанием px, берем только числа
           twoTop=Number(twoBlock.style.y.replace(/[^-0-9]/gim,''));
       
            if(oneTop==0||twoBlock==0){// задаем изначально положение блоков( по середине)
                oneTop=138;
                twoTop=138;
            }
            
            oneBlock.style.y=oneTop+ballH.OneSpeed+"px";//присваеваем изначальное положение блоков( по середине) 
            twoBlock.style.y=twoTop+ballH.TwoSpeed+"px";

            if (60+oneTop>=areaH.height){//задаем границы перемещения блоков(игроков)
                ballH.OneSpeed=0;
                oneBlock.style.y=oneTop+ballH.OneSpeed-2+"px";
            }
             if (oneTop<=40){
                ballH.OneSpeed=0;
                oneBlock.style.y=oneTop+ballH.OneSpeed+2+"px";
            }
            if (60+twoTop>=areaH.height){
                ballH.TwoSpeed=0;
                twoBlock.style.y=twoTop+ballH.TwoSpeed-2+"px";
            }
            if (twoTop<=40){
                ballH.TwoSpeed=0;
                twoBlock.style.y=twoTop+ballH.TwoSpeed+2+"px";
            }
            

            


            ballH.OneSpeed+=ballH.OnePlayer;
            ballH.TwoSpeed+=ballH.TwoPlayer;


            ballH.posX+=ballH.speedX;
            
            
           

            ballH.posY+=ballH.speedY;
            // вылетел ли мяч ниже пола?
            if ( ballH.posY+ballH.height>areaH.height+70 ) {
                ballH.speedY=-ballH.speedY;
                ballH.posY=areaH.height-ballH.height+70 ;
            }
            // вылетел ли мяч выше потолка?
            if ( ballH.posY<50 ) {
                ballH.speedY=-ballH.speedY;
                ballH.posY=50;
            }







            if(ballH.posY<=oneTop+ballH.OneSpeed&&ballH.posX<31  //27 позиция мячика, с которого начинается проверка (Если мячик левее 27 пикселей, и вне ракетки, останавливаем мячик)
            ||ballH.posY>=oneTop+ballH.OneSpeed+100&&ballH.posX<31){//если мячик вне ракетки
                if(ballH.speedX!=0&&ballH.speedY!=0){
                
                    ballH.TwoPlayerGol=ballH.TwoPlayerGol+1;
                Goal.innerHTML=ballH.OnePlayerGol+":"+ballH.TwoPlayerGol;
                }
               
                ballH.speedX=0;//убираем скорость перемещения
                ballH.speedY=0;
                
            }
            else {      //иначе отбиваем мячик
                 // вылетел ли мяч левее стены?
            if ( ballH.posX<32 ) { 
              
                ballH.speedX=-ballH.speedX;
                ballH.posX=34;
            }
            }
            




             if((ballH.posY>=twoTop+ballH.TwoSpeed+playerHeight&&ballH.posX>=490)
             ||(ballH.posY<=120+ballH.TwoSpeed&&ballH.posX>=490)){ //490 позиция мячика, с которого начинается проверка (Если мячик правее 490 пикселей, и вне ракетки, останавливаем мячик)
                 
                if(ballH.speedX!=0&&ballH.speedY!=0){//если мячик вне ракетки
                   debugger;
                    ballH.OnePlayerGol=ballH.OnePlayerGol+1;
                Goal.innerHTML=ballH.OnePlayerGol+":"+ballH.TwoPlayerGol;
                }
                
                ballH.speedX=0;//убираем скорость перемещения
                ballH.speedY=0;
                
            }
            else {  //иначе отбиваем мячик
                if ( ballH.posX+ballH.width>areaH.width+35 ) {// вылетел ли мяч правее стены?
                    debugger;
                        ballH.speedX=-ballH.speedX;
                        ballH.posX=areaH.width-ballH.width+33;
                }
            }

        ballH.update();*/
 }

    ballH.update();



    
    }

    </script>
    </html>